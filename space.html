<!DOCTYPE html>
<html lang="en">
    <head>
        <title>SIC - 3D boxes flyabout</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

        <link rel="stylesheet" type="text/css" href="space.css">

        <script type="x-shader/x-vertex" id="vertexshader">
            //uniform float u_zoom;

            attribute float a_glow;
            attribute vec2 a_spriteUv;
            attribute vec4 a_colour;

            varying float v_glow;
            varying vec2 v_spriteUv;
            varying vec4 v_colour;

            void main()
            {
                v_glow = a_glow;
                v_spriteUv = a_spriteUv;
                v_colour = a_colour;

                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                gl_PointSize = 16.0 * (300.0 / -mvPosition.z);
                gl_Position = projectionMatrix * mvPosition;
            }
        </script>

        <script type="x-shader/x-fragment" id="fragmentshader">
            varying float v_glow;

            varying vec2 v_spriteUv;
            varying vec4 v_colour;

            uniform sampler2D u_texture1;

            void main()
            {
                vec2 textureCoords = gl_PointCoord / 2.0;
                textureCoords += v_spriteUv;

                gl_FragColor = texture2D(u_texture1, textureCoords) * v_colour;
                //gl_FragColor.r = (1.0 - gl_FragColor.r) * v_alpha + gl_FragColor.r;
                gl_FragColor.rgb = gl_FragColor.rgb * (1.0 - v_glow) + vec3(v_glow);
                //gl_FragColor = gl_FragColor * (1.0);
            }
        </script>
    </head>
    <body>
        <script type="text/javascript" src="externals/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="externals/kdTree.js"></script>
        <script type="text/javascript" src="externals/three.js/three.js"></script>
        <script type="text/javascript" src="externals/three.js/examples/js/controls/FlyControls.js"></script>
        <!--<script type="text/javascript" src="externals/three.js/examples/js/TypedArrayUtils.js"></script>-->
        <script type="text/javascript" src="externals/dan_reusable/dan/dan.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/urls.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/numeric_helpers.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/gui/gui.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/gui/html/html.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/gui/html/PopupTextarea.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/snd/snd.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/snd/webaudio/webaudio.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/snd/webaudio/AudioContextOutputStream.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/snd/webaudio/Float32ArrayWavetablePlayer.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/loaders/loaders.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/loaders/AssetLoader.js"></script>
        <script type="text/javascript" src="externals/dan_reusable/dan/loaders/AssetLoader_threeTexture.js"></script>
        <script type="text/javascript" src="externals/freesound.js"></script>
        <script type="text/javascript" src="externals/seedrandom.js"></script>
        <script type="text/javascript" src="Float32ArrayWavetablePlayerWithGain.js"></script>

        <script type="text/javascript" src="source_sounds.js"></script>
        <script type="text/javascript" src="space.js"></script>
    </body>
</html>
